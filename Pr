!pip install bs4
!pip install selenium
!pip install lxml
import lxml
import urllib3
import pandas as pd
import requests
import sys
import time
from bs4 import BeautifulSoup
from selenium.webdriver.common.action_chains import ActionChains

sys.path.append('C:/users/Rpeddu/chromedriver_win32')
from selenium import webdriver
class Main:
	if __name__ == "__main__":
		Stockx_Search_Url= "https://www.stockx.com/"
searchTerm = input("Enter the Search Term of the shoe exactly as it appears:")
searchTerm = searchTerm.lower()
count = len(searchTerm.split())
print (count) 
if count > 13:
	print("Invalid entry, please enter the shoe name exactly as it appears on the Stockx website")
if count <= 5: 
	print("Invalid entry, please enter the shoe name exactly as with words like Air and Retro")
for i in range(0, len(searchTerm), 1):
         
        # Changing the ith character
        # to '-' if it's a space.
        if (searchTerm[i] == ' '):
            searchTerm = searchTerm.replace(searchTerm[i],'-')
print (searchTerm)
Stockx_Search_Url= "https://www.stockx.com/"
url = Stockx_Search_Url+searchTerm
print(url)
driver = webdriver.Chrome(executable_path='C:/users/Rpeddu/chromedriver_win32/chromedriver.exe')
session = requests.Session()
response = session.get(url)
driver.get(url)
driver.maximize_window()
time.sleep(10)
#driver.find_element_by_class_name('css-14bs28v').click()
#driver.find_element_by_class_name('css-1ianwbe').click()
#driver.find_element_by_class_name('all').click()
driver.find_element_by_xpath('//button[normalize-space()="View Sales"]').click()


soup = BeautifulSoup(driver.page_source,"lxml")

table = soup.find('table', attrs={'class':'subs noBorders evenRows'})
table_rows = table.find_all('tr')
driver.quit()
df = []
for tr in table_rows:
    td = tr.find_all('td')
    row = [tr.text for tr in td]
    df.append(row)
pd.DataFrame(df, columns=["Date", "Time","Size", "Sale Price"])
df


#sneaker_price = soup.select("div.en-us.stat-value.stat-Last Sale")[0]
#print(sneaker_price)


